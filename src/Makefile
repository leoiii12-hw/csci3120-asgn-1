# Store the files generated by JavaCC
JAVACC_OUTDIR = miniJava
JAVACC_FILE = MiniJavaParser.jj
PARSER = $(JAVACC_OUTDIR)/MiniJavaParser.java

all: Main.class

Main.class: Main.java $(PARSER)
	javac Main.java

$(PARSER): $(JAVACC_FILE)
	# Create the directory if it does not exist
	mkdir -p $(JAVACC_OUTDIR)
	javacc -OUTPUT_DIRECTORY="$(JAVACC_OUTDIR)" $(JAVACC_FILE)
	javac $(JAVACC_OUTDIR)/*.java

clean:
	rm -rf $(JAVACC_OUTDIR) *.class

run:
	../tests/test.sh
